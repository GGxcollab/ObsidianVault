- ## User sign-in (prova)
	- Existe dos ambientes, on-premisse e nuvem, nisso o ad connect esta no meio do caminho sincronizando tudo que tem no seu on-premisse com a nuvem, podem sincronizar tudo ou o que voce quiser que ele sincroniza.
	- **Password Hash Synchronization (PHS):** 
		- Parte boa:
			- recomendação oficial da microsoft
			- Se perder a comunicação com o data center, o ambiente ainda continua vivo
		- Como funciona: 
			- Existe um utilizador local chamado "Andre" com uma password "123", e o ad connect não sabe que senha é essa, mas ira fazer um calculo matematico e vai gerar um resultado, esse resultado é chamado de "hash", esse hash que foi criptografado durante esse processo, o ad conect ira mandar isso para o azure e deixara gravado la e essa criptografia nao é passiva de ser descriptografada e voltada para a original.
			- diante disso,  um belo dia o utilizador vai no portal azure e decidiu logar com seu user e sua password, na hora que o azure receber essas informações, ira gerar um hash por meio de um calculo matematico e ira comparar para ver se o hash bate com o o do azure que foi cadastrado, e nisso ele nunca ira saber qual realmente é minha password sera somente uam comparação de hashs  
	- **Pass-through authentication (PTA)**:
		- Como funciona:
			- É o contrario do PHS, significa que meu hash não existe la dentro do azure e toda vez que o utilizador colocar seu user e password, o portal do azure vai se comunicar com AD connect "perguntando" e conferindo se existe esse user e a passowrd dele, o AD connect falando com o AD local para ver se é mesmo isso conferindo se é verdadeiro ou falso, ai ele devolvera a resposta para o AD Connect que devolvera a informação para o azure ai consegue convesar.
		- Parte ruim:
			- Se o data center parar, ninguem mais consegue se conectar e utilizado em lugar nenhum.
	- **Federation with AD FS (Federation Server)** / **Federation with PingFederate**
		- É basicamente a mesma coisa.
		- Tem comunicação direta com o Active Directory, onde ter que ter conhecimento do user e pass nessa comunicação, logo deve tambem deixar o AD FS junto com o AD em um rede privada/isolada e separada e segura, sem acesso a internet e se cria uma replica do FS em um ambiente publico.
		- isso é uma forma de privar ainda mais o AD (local/on-premisses) (controlador de dominio) para que nao seja qualquer um que chegue la dentro, pq uma vez derrubado acabara com a rede inteira
		- Como funciona:
			- O User/Utilizador tenta logar em alguma aplicação ou no Portal do azure e o Azure AD nao reconhece esse usuário, nem a senha nem o hash, então ira mandar a solicitação para o AD connect, so que na minha configuração colocado que quem ira fazer a autenticação desse fluxo é o AD FS, e a partir disso o AD connect ira se comunicar com o Federation Server .
			- É replica do azure AD que vira o Federaton Server que ira esse FS ira se replicar novamente (FS Proxy) para um ambiente exposto publicamente, ai sim o AD connect, azure e talz, e o AD e o Federation Server seram utilizados somente para validar.
			- O azure AD connect se comunica com o Federation proxy que se comunica com o Federation Server que fala com o AD que volta a configuração novamente ate chegar no Azure AD e dizer que pode ou nao autenticar o utilizador
		- 
		- ![[Pasted image 20240812150854.png]]
		- 
		